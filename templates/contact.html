{% extends 'base.html' %}
{% load static %}
{% block content %}
<section class="contact-page-sec">
    <div class="container">
      <div class="row">
        <div class="col-md-4">
          <div class="contact-info">
            <div class="contact-info-item">
              <div class="contact-info-icon">
                <i class="fa fa-map-marker" aria-hidden="true"></i>
              </div>
              <div class="contact-info-text">
                <h2>Address</h2>
                <span>M89M+58W Ring Rd</span>
                <span>Gwarko, Lalitpur</span>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="contact-info">
            <div class="contact-info-item">
              <div class="contact-info-icon">
                <i class="fa fa-envelope" aria-hidden="true"></i>
              </div>
              <div class="contact-info-text">
                <h2>Email</h2>
                <span>corbig@gmail.com</span>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="contact-info">
            <div class="contact-info-item">
              <div class="contact-info-icon">
                <i class="fa fa-clock-o" aria-hidden="true"></i>
              </div>
              <div class="contact-info-text">
                <h2>Office Time</h2>
                <span>Sun - Fri 10:00 am - 5:00 pm</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-8">
          <div class="contact-page-form">
            <h2>Get in Touch</h2>
            <form action="{% url 'contact' %}" method="post">
                {% csrf_token %}
              <div class="row">
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <div class="single-input-field">
                    <input type="text" placeholder="Your Name" name="name" required/>
                  </div>
                </div>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <div class="single-input-field">
                    <input type="email" placeholder="E-mail" name="email" required/>
                  </div>
                </div>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <div class="single-input-field">
                    <input type="text" placeholder="Phone Number" name="phone" required/>
                  </div>
                </div>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <div class="single-input-field">
                    <input type="text" placeholder="Subject" name="subject" required/>
                  </div>
                </div>
                <div class="col-md-12 message-input">
                  <div class="single-input-field">
                    <textarea placeholder="Write Your Message" name="message" required></textarea>
                  </div>
                </div>
                <div class="single-input-fieldsbtn">
                  <input type="submit" value="Send Now"/>
                </div>
              </div>
            </form>
          </div>
        </div>
        <div class="col-md-4">
          <div class="contact-page-map">
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d109741.02912911311!2d85.3155!3d27.6609!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x39eb1fdc9e292f1b%3A0x854b0f78174f0c36!2sCorbig%20Motors!5e0!3m2!1sen!2snp!4v1691148578424" width="100%" height="450" frameborder="0" style="border:0;" allowfullscreen></iframe>
</div>
          </div>
        </div>
      </div>
    </div>
</section>

<!-- Toast Notification Elements -->
<div id="toast" class="toast"></div>
<div id="timer" class="toast-timer"></div>
<div id="toast-close" class="toast-close-btn">X</div>

{% if messages %}
<script>
    // Function to display toast notifications
    const toast = document.querySelector("#toast");
    const toastTimer = document.querySelector("#timer");
    const closeToastBtn = document.querySelector("#toast-close");
    let countdown;

    const closeToast = () => {
        toast.style.animation = "close 0.3s cubic-bezier(.87,-1,.57,.97) forwards";
        toastTimer.classList.remove("timer-animation");
        clearTimeout(countdown);
    };

    const openToast = (message) => {
        toast.textContent = message;
        toast.style.animation = "open 0.3s cubic-bezier(.47,.02,.44,2) forwards";
        toast.classList.add("open");
        toastTimer.classList.add("timer-animation");
        clearTimeout(countdown);
        countdown = setTimeout(() => {
            closeToast();
        }, 5000);
    };

    closeToastBtn.addEventListener("click", closeToast);

    // Pass Django messages to JavaScript
    const messages = JSON.parse('{{ messages|escapejs }}');

    messages.forEach(message => {
        openToast(message);
    });
</script>
{% endif %}


<style>
.toast {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: #333;
    color: #fff;
    padding: 10px 20px;
    border-radius: 5px;
    display: none;
    z-index: 1000;
}

.toast.open {
    display: block;
}

.toast-timer {
    height: 5px;
    background-color: #fff;
    width: 100%;
    animation: timer-animation 5s linear forwards;
}

@keyframes open {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes close {
    from {
        opacity: 1;
        transform: translateY(0);
    }
    to {
        opacity: 0;
        transform: translateY(20px);
    }
}

@keyframes timer-animation {
    from {
        width: 100%;
    }
    to {
        width: 0;
    }
}

.toast-close-btn {
    position: absolute;
    top: 5px;
    right: 10px;
    cursor: pointer;
}
</style>
{% endblock %}
